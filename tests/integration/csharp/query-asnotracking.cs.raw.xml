<Files>
  <File path="tests/integration/csharp/query-asnotracking.cs">
    <compilation_unit>
      <class_declaration>
        <modifier>public</modifier>
        class
        <name>
          <identifier>UserService</identifier>
        </name>
        <body>
          <declaration_list>
            {
            <comment>// GetUser: missing AsNoTracking - should be flagged</comment>
            <method_declaration>
              <modifier>public</modifier>
              <returns>
                <identifier>UserDto</identifier>
              </returns>
              <name>
                <identifier>GetUser</identifier>
              </name>
              <parameters>
                <parameter_list>
                  (
                  <parameter>
                    <predefined_type field="type">int</predefined_type>
                    <name>
                      <identifier>id</identifier>
                    </name>
                  </parameter>
                  )
                </parameter_list>
              </parameters>
              <body>
                <block>
                  {
                  <local_declaration_statement>
                    <variable_declaration>
                      <implicit_type field="type">var</implicit_type>
                      <variable_declarator>
                        <name>
                          <identifier>user</identifier>
                        </name>
                        =
                        <invocation_expression>
                          <member_access_expression field="function">
                            <member_access_expression field="expression">
                              <identifier field="expression">_context</identifier>
                              .
                              <name>
                                <identifier>Users</identifier>
                              </name>
                            </member_access_expression>
                            .
                            <name>
                              <identifier>First</identifier>
                            </name>
                          </member_access_expression>
                          <arguments>
                            <argument_list>
                              (
                              <argument>
                                <lambda_expression>
                                  <parameters>
                                    <implicit_parameter>u</implicit_parameter>
                                  </parameters>
                                  =&gt;
                                  <body>
                                    <binary_expression>
                                      <left>
                                        <member_access_expression>
                                          <identifier field="expression">u</identifier>
                                          .
                                          <name>
                                            <identifier>Id</identifier>
                                          </name>
                                        </member_access_expression>
                                      </left>
                                      ==
                                      <right>
                                        <identifier>id</identifier>
                                      </right>
                                    </binary_expression>
                                  </body>
                                </lambda_expression>
                              </argument>
                              )
                            </argument_list>
                          </arguments>
                        </invocation_expression>
                      </variable_declarator>
                    </variable_declaration>
                    ;
                  </local_declaration_statement>
                  <return_statement>
                    return
                    <invocation_expression>
                      <identifier field="function">Map</identifier>
                      <arguments>
                        <argument_list>
                          (
                          <argument>
                            <identifier>user</identifier>
                          </argument>
                          )
                        </argument_list>
                      </arguments>
                    </invocation_expression>
                    ;
                  </return_statement>
                  }
                </block>
              </body>
            </method_declaration>
            <comment>// GetUserTracked: has AsNoTracking - OK</comment>
            <method_declaration>
              <modifier>public</modifier>
              <returns>
                <identifier>UserDto</identifier>
              </returns>
              <name>
                <identifier>GetUserTracked</identifier>
              </name>
              <parameters>
                <parameter_list>
                  (
                  <parameter>
                    <predefined_type field="type">int</predefined_type>
                    <name>
                      <identifier>id</identifier>
                    </name>
                  </parameter>
                  )
                </parameter_list>
              </parameters>
              <body>
                <block>
                  {
                  <local_declaration_statement>
                    <variable_declaration>
                      <implicit_type field="type">var</implicit_type>
                      <variable_declarator>
                        <name>
                          <identifier>user</identifier>
                        </name>
                        =
                        <invocation_expression>
                          <member_access_expression field="function">
                            <invocation_expression field="expression">
                              <member_access_expression field="function">
                                <member_access_expression field="expression">
                                  <identifier field="expression">_context</identifier>
                                  .
                                  <name>
                                    <identifier>Users</identifier>
                                  </name>
                                </member_access_expression>
                                .
                                <name>
                                  <identifier>AsNoTracking</identifier>
                                </name>
                              </member_access_expression>
                              <arguments>
                                <argument_list>()</argument_list>
                              </arguments>
                            </invocation_expression>
                            .
                            <name>
                              <identifier>First</identifier>
                            </name>
                          </member_access_expression>
                          <arguments>
                            <argument_list>
                              (
                              <argument>
                                <lambda_expression>
                                  <parameters>
                                    <implicit_parameter>u</implicit_parameter>
                                  </parameters>
                                  =&gt;
                                  <body>
                                    <binary_expression>
                                      <left>
                                        <member_access_expression>
                                          <identifier field="expression">u</identifier>
                                          .
                                          <name>
                                            <identifier>Id</identifier>
                                          </name>
                                        </member_access_expression>
                                      </left>
                                      ==
                                      <right>
                                        <identifier>id</identifier>
                                      </right>
                                    </binary_expression>
                                  </body>
                                </lambda_expression>
                              </argument>
                              )
                            </argument_list>
                          </arguments>
                        </invocation_expression>
                      </variable_declarator>
                    </variable_declaration>
                    ;
                  </local_declaration_statement>
                  <return_statement>
                    return
                    <invocation_expression>
                      <identifier field="function">Map</identifier>
                      <arguments>
                        <argument_list>
                          (
                          <argument>
                            <identifier>user</identifier>
                          </argument>
                          )
                        </argument_list>
                      </arguments>
                    </invocation_expression>
                    ;
                  </return_statement>
                  }
                </block>
              </body>
            </method_declaration>
            }
          </declaration_list>
        </body>
      </class_declaration>
    </compilation_unit>
  </File>
</Files>
