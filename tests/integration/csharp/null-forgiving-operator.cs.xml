<Files>
  <File path="tests/integration/csharp/null-forgiving-operator.cs">
    <unit>
      <comment>// Test: C# null-forgiving operator (!) should parse as postfix_unary_expression</comment>
      <comment>// This was historically misidentified as broken due to shell escaping issues (! -&gt; \!)</comment>
      <class>
        <public/>
        class
        <name>NullForgivingTest</name>
        <body>
          {
          <method>
            <public/>
            <returns>
              <type>void</type>
            </returns>
            <name>TestMethod</name>
            <parameters>()</parameters>
            <body>
              <block>
                {
                <local>
                  <variable>
                    <type>
                      string
                      <nullable/>
                    </type>
                    <declarator>
                      <name>nullable</name>
                      =
                      <call>
                        <ref field="function">GetNullable</ref>
                        <arguments>
                          <arguments>()</arguments>
                        </arguments>
                      </call>
                    </declarator>
                  </variable>
                  ;
                </local>
                <comment>// Simple null-forgiving</comment>
                <local>
                  <variable>
                    <implicit_type field="type">var</implicit_type>
                    <declarator>
                      <name>length</name>
                      =
                      <member>
                        <postfix_unary_expression field="expression">
                          <ref>nullable</ref>
                          !
                        </postfix_unary_expression>
                        .
                        <name>
                          <ref>Length</ref>
                        </name>
                      </member>
                    </declarator>
                  </variable>
                  ;
                </local>
                <comment>// Chained member access</comment>
                <local>
                  <variable>
                    <implicit_type field="type">var</implicit_type>
                    <declarator>
                      <name>upper</name>
                      =
                      <member>
                        <call field="expression">
                          <member field="function">
                            <postfix_unary_expression field="expression">
                              <ref>nullable</ref>
                              !
                            </postfix_unary_expression>
                            .
                            <name>
                              <ref>ToUpper</ref>
                            </name>
                          </member>
                          <arguments>
                            <arguments>()</arguments>
                          </arguments>
                        </call>
                        .
                        <name>
                          <ref>Length</ref>
                        </name>
                      </member>
                    </declarator>
                  </variable>
                  ;
                </local>
                <comment>// In method call</comment>
                <expression_statement>
                  <call>
                    <ref field="function">Process</ref>
                    <arguments>
                      <arguments>
                        (
                        <argument>
                          <postfix_unary_expression>
                            <ref>nullable</ref>
                            !
                          </postfix_unary_expression>
                        </argument>
                        )
                      </arguments>
                    </arguments>
                  </call>
                  ;
                </expression_statement>
                <comment>// Multiple on same line</comment>
                <local>
                  <variable>
                    <implicit_type field="type">var</implicit_type>
                    <declarator>
                      <name>combined</name>
                      =
                      <binary>
                        <op>+</op>
                        <left>
                          <member>
                            <postfix_unary_expression field="expression">
                              <ref>first</ref>
                              !
                            </postfix_unary_expression>
                            .
                            <name>
                              <ref>Length</ref>
                            </name>
                          </member>
                        </left>
                        +
                        <right>
                          <member>
                            <postfix_unary_expression field="expression">
                              <ref>second</ref>
                              !
                            </postfix_unary_expression>
                            .
                            <name>
                              <ref>Length</ref>
                            </name>
                          </member>
                        </right>
                      </binary>
                    </declarator>
                  </variable>
                  ;
                </local>
                }
              </block>
            </body>
          </method>
          <method>
            <private/>
            <returns>
              <type>
                string
                <nullable/>
              </type>
            </returns>
            <name>GetNullable</name>
            <parameters>()</parameters>
            <body>
              <arrow_expression_clause>
                =&gt;
                <null>null</null>
              </arrow_expression_clause>
            </body>
            ;
          </method>
          <method>
            <private/>
            <returns>
              <type>void</type>
            </returns>
            <name>Process</name>
            <parameters>
              (
              <parameter>
                <type>string</type>
                <name>s</name>
              </parameter>
              )
            </parameters>
            <body>
              <block>{ }</block>
            </body>
          </method>
          <field>
            <private/>
            <variable>
              <type>
                string
                <nullable/>
              </type>
              <declarator>
                <name>first</name>
              </declarator>
            </variable>
            ;
          </field>
          <field>
            <private/>
            <variable>
              <type>
                string
                <nullable/>
              </type>
              <declarator>
                <name>second</name>
              </declarator>
            </variable>
            ;
          </field>
          }
        </body>
      </class>
    </unit>
  </File>
</Files>
