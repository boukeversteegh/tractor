<Files>
  <File path="tests/integration/csharp/query-asnotracking.cs">
    <unit>
      <class>
        <public/>
        class
        <name>UserService</name>
        <body>
          {
          <comment>// GetUser: missing AsNoTracking - should be flagged</comment>
          <method>
            <public/>
            <returns>
              <ref>UserDto</ref>
            </returns>
            <name>GetUser</name>
            <params>
              (
              <param>
                <type>int</type>
                <name>id</name>
              </param>
              )
            </params>
            <body>
              <block>
                {
                <local>
                  <var>
                    <implicit_type field="type">var</implicit_type>
                    <decl>
                      <name>user</name>
                      =
                      <call>
                        <member field="function">
                          <member field="expression">
                            <ref field="expression">_context</ref>
                            .
                            <name>
                              <ref>Users</ref>
                            </name>
                          </member>
                          .
                          <name>
                            <ref>First</ref>
                          </name>
                        </member>
                        <arguments>
                          <args>
                            (
                            <arg>
                              <lambda>
                                <implicit_parameter>u</implicit_parameter>
                                =&gt;
                                <body>
                                  <binary>
                                    <op>==</op>
                                    <left>
                                      <member>
                                        <ref field="expression">u</ref>
                                        .
                                        <name>
                                          <ref>Id</ref>
                                        </name>
                                      </member>
                                    </left>
                                    ==
                                    <right>
                                      <ref>id</ref>
                                    </right>
                                  </binary>
                                </body>
                              </lambda>
                            </arg>
                            )
                          </args>
                        </arguments>
                      </call>
                    </decl>
                  </var>
                  ;
                </local>
                <return>
                  return
                  <call>
                    <ref field="function">Map</ref>
                    <arguments>
                      <args>
                        (
                        <arg>
                          <ref>user</ref>
                        </arg>
                        )
                      </args>
                    </arguments>
                  </call>
                  ;
                </return>
                }
              </block>
            </body>
          </method>
          <comment>// GetUserTracked: has AsNoTracking - OK</comment>
          <method>
            <public/>
            <returns>
              <ref>UserDto</ref>
            </returns>
            <name>GetUserTracked</name>
            <params>
              (
              <param>
                <type>int</type>
                <name>id</name>
              </param>
              )
            </params>
            <body>
              <block>
                {
                <local>
                  <var>
                    <implicit_type field="type">var</implicit_type>
                    <decl>
                      <name>user</name>
                      =
                      <call>
                        <member field="function">
                          <call field="expression">
                            <member field="function">
                              <member field="expression">
                                <ref field="expression">_context</ref>
                                .
                                <name>
                                  <ref>Users</ref>
                                </name>
                              </member>
                              .
                              <name>
                                <ref>AsNoTracking</ref>
                              </name>
                            </member>
                            <arguments>
                              <args>()</args>
                            </arguments>
                          </call>
                          .
                          <name>
                            <ref>First</ref>
                          </name>
                        </member>
                        <arguments>
                          <args>
                            (
                            <arg>
                              <lambda>
                                <implicit_parameter>u</implicit_parameter>
                                =&gt;
                                <body>
                                  <binary>
                                    <op>==</op>
                                    <left>
                                      <member>
                                        <ref field="expression">u</ref>
                                        .
                                        <name>
                                          <ref>Id</ref>
                                        </name>
                                      </member>
                                    </left>
                                    ==
                                    <right>
                                      <ref>id</ref>
                                    </right>
                                  </binary>
                                </body>
                              </lambda>
                            </arg>
                            )
                          </args>
                        </arguments>
                      </call>
                    </decl>
                  </var>
                  ;
                </local>
                <return>
                  return
                  <call>
                    <ref field="function">Map</ref>
                    <arguments>
                      <args>
                        (
                        <arg>
                          <ref>user</ref>
                        </arg>
                        )
                      </args>
                    </arguments>
                  </call>
                  ;
                </return>
                }
              </block>
            </body>
          </method>
          }
        </body>
      </class>
    </unit>
  </File>
</Files>
